<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="metapayMapper">
	<update id="updateMetapayBalance" parameterType="map">
		update metapay
		set metapay_balance = metapay_balance + #{amount}
		where metapay_id = (select metapay_id from metapay where user_id = #{userId})
	</update>

	<insert id="payMetapay" parameterType="payLog">
		insert into pay_log
		values(pay_log_id_seq.nextval, #{metapayId}, #{payCategoryId}, null, #{payLogAmount}, systimestamp)
	</insert>
	
	<select id="selectMetapayByUserId" parameterType="string" resultType="metapay">
		select * from metapay where user_id = #{_parameter}
	</select>
</mapper>